<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>말씀따라 흐르는 샘물</title>
<meta name="color-scheme" content="light dark">
<style>
  :root {
    --fg:#111827; --muted:#6b7280; --line:#d1d5db; --line-strong:#9ca3af;
    --accent:#0ea5e9; --bg:#ffffff; --bgsoft:#f8fafc; --box:#ffffff; --box-line:#d1d5db; --box-tint:#f0f9ff;
  }
  @media (prefers-color-scheme: dark){
    :root { --fg:#e5e7eb; --muted:#9ca3af; --line:#2b2f36; --line-strong:#4b5563; --bg:#0b0f14; --bgsoft:#0f141a; --box:#0c1218; --box-line:#1f2937; --box-tint:#0c141c; }
    body { background: var(--bg); }
  }
  * { box-sizing:border-box; }
  body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", "Apple SD Gothic Neo", sans-serif; color:var(--fg); background:var(--bg); }
  .wrap { max-width: 940px; margin: 28px auto; padding: 0 12px; }

  header { display:flex; justify-content:center; align-items:center; margin:6px 0 4px; }
  .brand { display:inline-flex; align-items:center; justify-content:center; padding:6px 14px; border:1.5px solid var(--line-strong); border-radius:999px; background:var(--bgsoft); }
  .brand h1 { font-size:16px; margin:0; letter-spacing:-0.2px; font-weight:700; }

  .yearbar { display:flex; justify-content:center; margin:6px 0; }
  .yearbar .year { font-size:16px; font-weight:700; letter-spacing:-0.3px; }
  .monthbar { display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin:4px 0 10px; }
  .monthbar a { text-decoration:none; color:var(--muted); padding:2px 0; font-size:14px; }
  .monthbar a.active { color:var(--accent); font-weight:700; }

  table.cal { width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed; }
  .cal thead th { background:var(--bgsoft); position:sticky; top:0; z-index:1; font-weight:700; padding:8px; font-size:13px; border-bottom:2px solid var(--line-strong); border-top:1.5px solid var(--line-strong); border-left:1.5px solid var(--line-strong); }
  .cal thead th:last-child { border-right:1.5px solid var(--line-strong); }
  .cal tbody td { padding:6px; position:relative; background:var(--bg); border-left:1.5px solid var(--line); border-bottom:1.5px solid var(--line); }
  .cal tbody tr:last-child td { border-bottom:1.5px solid var(--line-strong); }
  .cal tbody td:last-child { border-right:1.5px solid var(--line-strong); }
  .cal tbody td:first-child { border-left:1.5px solid var(--line-strong); }

  .daynum { display:inline-block; font-size:11px; color:var(--muted); user-select:none; }
  .box { width:100%; aspect-ratio:1/1; margin-top:4px; border:1.5px solid var(--box-line); background:linear-gradient(180deg, var(--box-tint) 0%, var(--box) 80%); border-radius:12px; position:relative; overflow:hidden; box-shadow:0 1px 0 rgba(0,0,0,.02), 0 6px 12px rgba(0,0,0,.04); transition:border-color .15s, box-shadow .15s, transform .06s; }
  .box.link { cursor:pointer; }
  .box.link:hover { border-color:var(--accent); box-shadow:0 1px 0 rgba(0,0,0,.03), 0 10px 18px rgba(0,0,0,.08); }
  .box.link:active { transform: translateY(1px); }

  @media (max-width:640px){
    .wrap { margin: 20px auto; }
    .brand h1 { font-size:15px; }
    .yearbar .year { font-size:15px; }
    .monthbar a { font-size:13px; }
    .cal thead th { padding:8px; font-size:12px; }
  }
</style>
</head>
<body>
<div class="wrap">
  <header><div class="brand"><h1>말씀따라 흐르는 샘물</h1></div></header>

  <div class="yearbar" aria-label="연도"><div class="year" id="year-label"></div></div>
  <div class="monthbar" id="monthbar" aria-label="월 선택"></div>

  <table class="cal" aria-label="월력" id="cal">
    <thead>
      <tr><th scope="col">일</th><th scope="col">월</th><th scope="col">화</th><th scope="col">수</th><th scope="col">목</th><th scope="col">금</th><th scope="col">토</th></tr>
    </thead>
    <tbody id="tbody"></tbody>
  </table>
</div>

<script>
/* 1) 월별 링크: 2025-09만 채움 (필요시 여기만 수정) */
const MONTH_LINKS = {
  '2025-09': {
    '08':'https://noemisuh.tistory.com/entry/생명강의-근원',
    '09':'https://noemisuh.tistory.com/entry/근원-시와-묵상-1',
    '10':'https://noemisuh.tistory.com/entry/근원-시와-묵상-2',
    '11':'https://noemisuh.tistory.com/entry/근원-시와-묵상-3',
    '12':'https://noemisuh.tistory.com/entry/근원-시와-묵상-4',
    '13':'https://noemisuh.tistory.com/entry/근원-예화',
    '15':'https://noemisuh.tistory.com/entry/충만-생명강의-충만',
    '16':'https://noemisuh.tistory.com/entry/충만-시와-묵상-1',
    '17':'https://noemisuh.tistory.com/entry/충만-시와-묵상-2',
    '18':'https://noemisuh.tistory.com/entry/충만-시와-묵상-3',
    '19':'https://noemisuh.tistory.com/entry/충만-시와-묵상-4',
    '20':'https://noemisuh.tistory.com/entry/충만-예화'
  }
};

/* 2) 렌더 & 링크 적용 (한 파일 완결형) */
(function(){
  const qs = new URLSearchParams(location.search);
  let year  = parseInt(qs.get('y')||'2025',10);
  let month = parseInt(qs.get('m')||'9',10); // 기본 9월

  const $tbody = document.getElementById('tbody');
  const $ym    = document.getElementById('year-label');

  function setYearLabel(y){ $ym.textContent = y + '년'; }
  function buildMonthbar(y, activeM){
    const mb = document.getElementById('monthbar'); mb.innerHTML = '';
    for(let m=1;m<=12;m++){
      const a = document.createElement('a');
      a.href = `?y=${y}&m=${m}`;
      a.textContent = `${m}월`;
      if(m===activeM) a.className = 'active';
      mb.appendChild(a);
    }
  }
  function weeksOfMonth(y,m){
    const first = new Date(y,m-1,1), last = new Date(y,m,0);
    const cells = [];
    for(let i=0;i<first.getDay();i++) cells.push(null);
    for(let d=1; d<=last.getDate(); d++) cells.push(d);
    while(cells.length%7) cells.push(null);
    const weeks=[]; for(let i=0;i<cells.length;i+=7) weeks.push(cells.slice(i,i+7));
    return weeks;
  }
  function applyMonthLinks(y,m){
    const key = `${y}-${String(m).padStart(2,'0')}`;
    const table = MONTH_LINKS[key] || {};
    document.querySelectorAll('#tbody td').forEach(td=>{
      const numEl = td.querySelector('.daynum');
      const box   = td.querySelector('.box');
      if(!numEl||!box) return;
      const dd = String(numEl.textContent.trim()).padStart(2,'0');
      const url = table[dd] || '';

      box.classList.remove('link'); box.removeAttribute('data-link'); box.removeAttribute('aria-label');

      if(url){ box.classList.add('link'); box.dataset.link = url; box.setAttribute('aria-label', url); }
    });
  }
  function render(y,m){
    setYearLabel(y); buildMonthbar(y,m);
    $tbody.innerHTML='';
    for(const row of weeksOfMonth(y,m)){
      const tr=document.createElement('tr');
      for(const d of row){
        const td=document.createElement('td');
        if(d!=null){
          const sn=document.createElement('span'); sn.className='daynum'; sn.textContent=d; td.appendChild(sn);
          const box=document.createElement('div'); box.className='box'; td.appendChild(box);
        }
        tr.appendChild(td);
      }
      $tbody.appendChild(tr);
    }
    applyMonthLinks(y,m);
  }

  // 클릭 위임
  document.addEventListener('click', e=>{
    const box = e.target.closest('.box.link'); if(!box) return;
    const url = box.dataset.link; if(url) location.href = url;
  });

  render(year, month);
})();
</script>
</body>
</html>
