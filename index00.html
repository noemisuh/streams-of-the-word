<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>말씀따라 흐르는 샘물</title>
<meta name="color-scheme" content="light dark" />

<style>
/* ===================== 기본 컬러 / 타이포 ===================== */
:root{
  --fg:#111827; --muted:#6b7280; --line:#e5e7eb; --line-strong:#cbd5e1;
  --accent:#0ea5e9; --bg:#ffffff; --box:#ffffff; --bgsoft:#f8fafc; --nav:#0f172a;
}
@media (prefers-color-scheme: dark){
  :root{
    --fg:#e5e7eb; --muted:#9ca3af; --line:#334155; --line-strong:#475569;
    --accent:#38bdf8; --bg:#0b0f14; --box:#0f1720; --bgsoft:#0f1720; --nav:#0b1220;
  }
}
*{box-sizing:border-box}
html,body{
  margin:0; padding:0; background:var(--bg); color:var(--fg);
  font:15px/1.5 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,
  "Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic",sans-serif;
}
a{color:var(--accent)}

/* ===================== 레이아웃 ===================== */
.wrap{max-width:1080px;margin:0 auto;padding:16px}
.top{display:flex;flex-wrap:wrap;align-items:center;gap:12px;margin:14px 0 10px}
.brand{font-weight:700;font-size:1.15rem;display:flex;align-items:center;gap:8px}
.brand .dot{width:10px;height:10px;border-radius:999px;background:var(--accent);display:inline-block}
.yearbar{display:flex;align-items:center;gap:12px;font-weight:600}
.yearbar a{color:#0f172a;text-decoration:none;border:1px solid #e5e7eb;border-radius:8px;padding:2px 8px}
.monthbar{display:flex;flex-wrap:wrap;gap:8px;width:100%}
.monthbar a{padding:4px 8px;border-radius:8px;text-decoration:none;border:1px solid #e5e7eb;color:#0f172a}
.monthbar a.active{background:var(--accent);color:#fff;border-color:var(--accent)}

/* ===================== 달력 구조 ===================== */
.cal{margin-top:10px;border:1px solid var(--line-strong);border-radius:14px;overflow:hidden;background:var(--box)}
.cal .head{display:grid;grid-template-columns:repeat(7,1fr);border-bottom:1px solid var(--line-strong);background:var(--bgsoft)}
.cal .head div{padding:10px 8px;text-align:center;font-weight:700;color:var(--muted)}
.grid{display:grid;grid-template-columns:repeat(7,1fr)}
.cell{border-right:1px solid var(--line);border-bottom:1px solid var(--line);padding:10px;position:relative}
.grid .cell:nth-child(7n){border-right:none}

/* ===================== 캘 셀 카드 ===================== */
.cellbox{
  position:relative;display:flex;flex-direction:column;width:100%;min-height:140px;
  padding:28px 16px 16px;border:1px solid var(--line);border-radius:14px;
  background:rgba(14,165,233,.10);text-decoration:none;color:inherit;
  transition:box-shadow .15s,border-color .15s,background .15s;
}
a.cellbox:hover{
  box-shadow:0 2px 10px rgba(0,0,0,.06);
  border-color:var(--accent);
  background:rgba(14,165,233,.14);
}
.dnum-badge{
  position:absolute;left:10px;top:10px;z-index:3;font-size:12px;color:var(--muted);
  padding:2px 6px;border:1px solid var(--line);border-radius:8px;background:var(--box);
}
.center{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:6px 4px}
.title-center{
  max-width:100%;font-size:16px;line-height:1.4;white-space:normal;word-break:keep-all;text-wrap:balance;
  overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;margin:0;
}
.ref{margin-top:8px;font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
@media (prefers-color-scheme: dark){
  .cellbox{background:rgba(56,189,248,.12)}
  .dnum-badge{background:#0f1720;border-color:#334155;color:#9ca3af}
}

/* ===================== 반응형 ===================== */
:root{--gap:10px;--cell-h:118px;--head-h:38px}
.cal .head{gap:var(--gap);height:var(--head-h);align-items:center;font-weight:700;text-align:center;color:#0f172a}
.cal .grid{grid-template-columns:repeat(7,minmax(0,1fr));gap:var(--gap);width:100%}
.cal .grid>*{min-width:0;height:var(--cell-h);padding:10px;border:1px solid #e5e7eb;border-radius:12px;background:#fff;display:flex;flex-direction:column;justify-content:space-between;overflow:hidden}
@media (max-width:480px){
  :root{--gap:8px;--cell-h:110px;--head-h:34px}
  .wrap{padding:12px}
  .monthbar{gap:6px}
}

/* ===================== 상단 네비 (최신 통합본) ===================== */
/* 페이지 제목 숨김 */
h1#page-title, h1.page-title { display:none !important; }

/* 상단 네비 스타일 */
.site-nav{
  background:var(--nav); color:#fff; position:sticky; top:0; z-index:50;
  border-bottom:1px solid rgba(255,255,255,.08);
}
.site-nav nav{
  display:flex; flex-wrap:wrap; gap:14px;
  justify-content:center; align-items:center;
  padding:14px 10px; line-height:1;
}
.site-nav a{
  color:#fff; text-decoration:none; opacity:.92; padding:2px 4px; border-radius:8px;
}
.site-nav a:hover,.site-nav a:focus{ opacity:1; text-decoration:underline; }
.site-nav .group{ display:inline-flex; align-items:baseline; gap:8px; }
.site-nav .label{ font-weight:700; opacity:1; }
.site-nav .brand{ font-size:1.55rem; font-weight:800; letter-spacing:.2px; }
@media (max-width:719px){ .site-nav .brand{ font-size:1.35rem; } }
.site-nav .inline-links{ font-size:.98rem; opacity:.92; }
.site-nav .sep{ margin:0 6px; opacity:.6; }

/* 연/월 화살표 크게 */
.year-nav button, .year-nav .arrow{ font-size:1.25rem; padding:0 .4em; line-height:1.1; }

/* ===== 네비 크기/균형 조정 ===== */
.site-nav{background:#0f172a;color:#fff;position:sticky;top:0;z-index:20;border-bottom:1px solid rgba(255,255,255,.08)}
.site-nav nav{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;align-items:center;padding:12px 16px}
.site-nav a{color:#fff;text-decoration:none;opacity:.9;padding:4px 8px;border-radius:10px}
.site-nav a:hover,.site-nav a:focus{opacity:1;text-decoration:underline}
.site-nav .group .label{font-weight:600;margin-right:4px;font-size:.95rem} /* [2] 네비의 '말씀따라 흐르는 샘물' 글자 작게 */
.site-nav .inline-links{font-size:.95rem;opacity:.85}
.site-nav .pill{background:rgba(255,255,255,.12);font-weight:600}

/* ===== 페이지/컨테이너 여백 확장 (잘림 방지) ===== */
.page-wrap,.calendar-wrap,.container{
  max-width:1200px; margin:24px auto; padding:0 24px;
}

/* ===== 달력 상단 타이틀/연-월 화살표 중앙 정렬 & 2배 확대 ===== */
.cal-head{
  display:flex; align-items:center; justify-content:center; gap:16px;
  margin:14px 0 18px 0;
}
.cal-head .title{
  font-size:2rem; font-weight:800; letter-spacing:.3px; /* [4] 타이틀 2배 */
}
.cal-head .year-nav button, .cal-head .year-nav .btn{
  font-size:1.75rem; line-height:1; padding:4px 10px; border-radius:12px;
}
.cal-head .year-label{font-size:1.5rem; font-weight:700}
.cal-head + .weekdays{ margin-top:14px; } /* [4] 타이틀 아래 한 칸 여백 */

/* ===== 요일 헤더(월화수...) 좌우/상하 여백 넓힘 ===== */
.weekdays{
  display:grid; grid-template-columns:repeat(7,1fr); gap:10px;  /* [3] 칸 사이 간격 증가 */
  margin-bottom:8px;
}
.weekdays span, .weekdays th{
  text-align:center; padding:10px 6px; font-weight:700; border-radius:10px;
  background:var(--bgsoft, #f8fafc);
}

/* ===== 개별 날짜 셀: 잘림/클릭 문제 해결 ===== */
.cal-grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:10px; }
.cal-cell{
  min-height:116px; /* [5] 세로 여유 */
  padding:10px; border:1px solid var(--line, #e5e7eb); border-radius:12px;
  background:#eef6fb; overflow:visible; position:relative;
}

/* 셀 안 링크가 클릭되지 않는 문제: 어떤 오버레이가 클릭을 막는 경우를 차단 */
.cal-cell::after{ pointer-events:none; }
.cal-cell *{ pointer-events:auto; }
.cal-cell a{ display:block; position:relative; z-index:1; }

/* 모바일 안전 여백 */
@media (max-width: 640px){
  .site-nav nav{gap:8px;padding:10px}
  .cal-head .title{font-size:1.6rem}
  .cal-head .year-nav button{font-size:1.4rem}
  .cal-cell{min-height:100px}
}

/* ==== 달력 헤더 중앙 정렬 & 여백 ==== */
.cal-head{
  display:grid;
  grid-template-columns:1fr auto 1fr; /* ◀  [제목+연도]  ▶ */
  align-items:center;
  gap:12px;
  margin:12px 0 18px;                 /* 제목 아래 여백 1칸 */
}
.cal-head .prev-year{ justify-self:end;  font-size:1.75rem; }
.cal-head .next-year{ justify-self:start;font-size:1.75rem; }
.cal-head .title-wrap{                 /* 가운데 묶음 */
  grid-column:2; display:flex; align-items:baseline; gap:10px;
}
.cal-head .title{ font-size:2rem; font-weight:800; }
.cal-head .year-label{ font-size:1.5rem; font-weight:700; }

/* 혹시 남아있는 예전 제목(중복 표시) 숨김 */
h1#page-title, h1.page-title, .cal-title-legacy{ display:none !important; }

/* 요일줄과 붙는 느낌 방지(여유) */
.weekdays{ margin-top:8px; }  
</style>
</head>
  
<body>
<!-- ===== 상단 네비: 통합 버전 ===== -->
<header class="site-nav" role="navigation" aria-label="Global">
  <nav>
    <!-- 브랜드/섹션 라벨: 글자 작게(다른 항목과 균형) -->
    <span class="group">
      <span class="label">말씀따라 흐르는 샘물</span>
      <small class="inline-links" aria-label="Streams of the Word languages">
        ( <a data-lang="ko" href="?lang=ko">한국어</a>
        <span class="sep">ㅣ</span>
        <a data-lang="en" href="?lang=en">English</a>
        <span class="sep">ㅣ</span>
        <a data-lang="es" href="?lang=es">Español</a>
        <span class="sep">ㅣ</span>
        <a data-lang="zh" href="?lang=zh">中文</a> )
      </small>
    </span>

    <span class="sep">|</span>

    <!-- 블로그(네이버/티스토리) -->
    <span class="group">
      <span class="label">블로그</span>
      <small class="inline-links">
        ( <a href="https://blog.naver.com/noemisuh" target="_blank" rel="noopener">네이버</a>
        <span class="sep">ㅣ</span>
        <a href="https://noemisuh.tistory.com" target="_blank" rel="noopener">티스토리</a> )
      </small>
    </span>

    <span class="sep">|</span>

    <!-- 사라진 메뉴 복구 -->
    <a class="pill" href="https://noemisuh.github.io/faith-bible-copy/">믿음으로 쓰는 성경</a>
    <a class="pill" href="https://noemisuh.github.io/faith-bible-copy/">필사 성경</a>
  </nav>
</header>

<!-- ===================== 상단 영역/달력 ===================== -->
<div class="wrap">
  <section class="top" aria-label="상단">
    <div class="brand"><span class="dot" aria-hidden="true"></span><span>말씀따라 흐르는 샘물</span></div>
    <nav class="yearbar" aria-label="년도">
      <a id="prevYear" href="#" aria-label="이전 해">◀</a>
      <span class="yr" id="yearLabel">0000</span>
      <a id="nextYear" href="#" aria-label="다음 해">▶</a>
    </nav>
    <nav class="monthbar" id="monthbar" aria-label="월"></nav>
  </section>

  <section class="cal" aria-label="달력">
    <div class="head" id="weekday-head"><div>일</div><div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div>토</div></div>
    <div id="grid" class="grid" role="grid" aria-label="달력 그리드"></div>
  </section>
</div>

<!-- (선택) 내장 데이터 JSON을 넣고 싶다면 아래 스크립트 태그에 JSON을 넣으세요.
<script id="SOW_EMBED_DATA" type="application/json">
{ "2025-11:ko":[["01","제목","본문","https://..."]] }
</script>
-->

<script>
/* ===================== 다국어/렌더/데이터 로더 — 단일 스크립트 ===================== */
(function(){
  /* I18N */
  var I18N = {
    ko:{ brand:"말씀따라 흐르는 샘물", daysShort:["일","월","화","수","목","금","토"],
         monthsShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],
         monthsFull:["1","2","3","4","5","6","7","8","9","10","11","12"],
         title:(y,m)=>`${y}년 ${m}월` },
    es:{ brand:"Riachuelos de la Palabra", daysShort:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],
         monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],
         monthsFull:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],
         title:(y,mname)=>`${mname} de ${y}` },
    en:{ brand:"Streams of the Word", daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],
         monthsShort:["Jan","Feb","Feb","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((v,i)=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][i]),
         monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],
         title:(y,mname)=>`${mname} ${y}` },
    zh:{ brand:"话语之溪流", daysShort:["日","一","二","三","四","五","六"],
         monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],
         monthsFull:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],
         title:(y,mname)=>`${y}年${mname}` }
  };

  /* 파라미터 */
  var now=new Date();
  var url=new URL(location.href);
  var qLang=(url.searchParams.get('lang')||'').toLowerCase();
  var saved=localStorage.getItem('sow_lang')||'';
  var lang=qLang||saved||'ko'; if(!I18N[lang]) lang='ko';
  try{ localStorage.setItem('sow_lang',lang); }catch(e){}
  document.documentElement.lang=lang;
  var I=I18N[lang];

  var y=parseInt(url.searchParams.get('y')||now.getFullYear(),10);
  var m=parseInt(url.searchParams.get('m')||now.getMonth()+1,10);
  if(!(y>=1900&&y<=9999)) y=now.getFullYear();
  if(!(m>=1&&m<=12)) m=now.getMonth()+1;

  /* 상단 UI */
  var yLabel=document.getElementById('yearLabel'); if(yLabel) yLabel.textContent=y;
  var prev=document.getElementById('prevYear'), next=document.getElementById('nextYear');
  function go(y2,m2){
    var nu=new URL(location.href);
    nu.searchParams.set('y',String(y2));
    nu.searchParams.set('m',String(m2));
    nu.searchParams.set('lang',lang);
    location.href=nu.toString();
  }
  if(prev) prev.addEventListener('click', e=>{e.preventDefault(); go(y-1,m);});
  if(next) next.addEventListener('click', e=>{e.preventDefault(); go(y+1,m);});

  var brandText=document.querySelector('.brand span:last-child'); if(brandText) brandText.textContent=I.brand;

  /* 요일 헤더 */
  var head=document.getElementById('weekday-head');
  if(head){ head.innerHTML=''; I.daysShort.forEach(d=>{ var dv=document.createElement('div'); dv.textContent=d; head.appendChild(dv); }); }

  /* 월바 */
  var mbar=document.getElementById('monthbar');
  if(mbar){
    mbar.innerHTML='';
    for(let i=1;i<=12;i++){
      let a=document.createElement('a'); a.href='#'; a.textContent=I.monthsShort[i-1];
      if(i===m) a.className='active';
      a.addEventListener('click', e=>{e.preventDefault(); go(y,i);});
      mbar.appendChild(a);
    }
  }

  /* 문서 제목 */
  function setPageTitle(yy,mm){
    var nice=(lang==='es'||lang==='en'||lang==='zh') ? I.title(yy, I.monthsFull[mm-1]) : I.title(yy, mm);
    document.title=I.brand+' - '+nice;
  }

  /* 그리드 기본 렌더 */
  var dayMap=Object.create(null);
  function renderGrid(){
    var grid=document.getElementById('grid'); if(!grid) return;
    grid.innerHTML='';
    var first=new Date(y,m-1,1), start=first.getDay(), days=new Date(y,m,0).getDate();
    var cells=[];
    for(let s=0;s<start;s++) cells.push({empty:true});
    for(let d=1; d<=days; d++) cells.push({empty:false,d});
    while(cells.length%7!==0) cells.push({empty:true});

    cells.forEach(c=>{
      var cell=document.createElement('div'); cell.className='cell';
      if(c.empty){ grid.appendChild(cell); return; }

      var info=dayMap[c.d]||{};
      var el = info.href ? document.createElement('a') : document.createElement('div');
      el.className='cellbox';
      if(info.href){ el.href=info.href; el.target='_blank'; el.rel='noopener'; }

      var badge=document.createElement('div'); badge.className='dnum-badge'; badge.textContent=c.d; el.appendChild(badge);
      var center=document.createElement('div'); center.className='center';
      var tEl=document.createElement('div'); tEl.className='title-center'; tEl.textContent=info.title||''; center.appendChild(tEl);
      if(info.ref){ var r=document.createElement('div'); r.className='ref'; r.textContent=info.ref; center.appendChild(r); }
      el.appendChild(center);
      cell.appendChild(el); grid.appendChild(cell);
    });

    setPageTitle(y,m);
  }

  /* 내장 JSON 데이터 읽기 */
  (function loadEmbedJson(){
    var raw=document.getElementById('SOW_EMBED_DATA')?.textContent?.trim() || '';
    if(!raw) return;
    try{
      var obj=JSON.parse(raw);
      var key=y+'-'+String(m).padStart(2,'0')+':'+lang;
      var arr=obj[key];
      if(Array.isArray(arr)){
        arr.forEach(row=>{
          var d=parseInt((row[0]||'').replace(/^0+/,'')||row[0],10);
          if(!(d>=1&&d<=31)) return;
          dayMap[d]={ title:row[1]||'', ref:row[2]||'', href:(row[3]||'') };
        });
      }
    }catch(e){}
  })();

  /* 외부 data 파일 로드(있을 때만) */
  function parseText(t){
    t.replace(/\r\n?/g,'\n').split('\n').forEach(line=>{
      if(!line || /^\s*#/.test(line)) return;
      var parts=line.split('|').map(s=>(s||'').trim());
      if(parts.length<2) return;
      var d=parseInt((parts[0]||'').replace(/^0+/,'')||parts[0],10);
      if(!(d>=1 && d<=31)) return;
      var title=parts[1]||'', ref=(parts[2]||''), href='';
      for(let i=3;i<parts.length;i++){ if(parts[i]){ href=parts[i]; break; } }
      dayMap[d]={title,ref,href};
    });
  }
  function parseJson(txt){
    try{
      var obj=JSON.parse(txt);
      var key=y+'-'+String(m).padStart(2,'0')+':'+lang;
      var arr=obj[key]; if(!Array.isArray(arr)) return false;
      arr.forEach(row=>{
        var d=parseInt((row[0]||'').replace(/^0+/,'')||row[0],10);
        if(!(d>=1 && d<=31)) return;
        var title=row[1]||'', ref=row[2]||'', href='';
        for(let i=3;i<row.length;i++){ if(row[i]){ href=row[i]; break; } }
        dayMap[d]={title,ref,href};
      });
      return true;
    }catch(e){ return false; }
  }
  function tryFetch(url){
    return fetch(url+'?v='+Date.now(),{cache:'no-store'})
      .then(r=>r.ok?r.text():'').catch(()=> '');
  }
  function loadExternal(){
    var mm=String(m).padStart(2,'0');
    var list=[
      'data/'+y+'-'+mm+'.'+lang+'.txt',
      'data/'+y+'-'+mm+'.ko.txt',
      'data/'+y+'-'+mm+'.txt',
      'data/'+y+'-'+mm+'.json'
    ];
    (function next(i){
      if(i>=list.length){ renderGrid(); return; }
      tryFetch(list[i]).then(text=>{
        if(!text){ next(i+1); return; }
        if(/\.json(\?|$)/.test(list[i])){ if(!parseJson(text)){ next(i+1); return; } }
        else parseText(text);
        renderGrid(); // 첫 성공 시 렌더
      }).catch(()=> next(i+1));
    })(0);
  }

  /* 언어 버튼/내부 링크 보정(요구사항 2) */
  function wireLangLinks(){
    const q=new URLSearchParams(location.search);
    const yy=+(q.get('y')||y), mm2=+(q.get('m')||m), L=lang;
    document.querySelectorAll('[data-lang]').forEach(a=>{
      const tgt=(a.dataset.lang||'').toLowerCase(); if(!tgt) return;
      a.href=`?y=${yy}&m=${mm2}&lang=${tgt}`;
      if(tgt===L) a.setAttribute('aria-current','page');
    });
    document.querySelectorAll('a[href]').forEach(a=>{
      const href=a.getAttribute('href')||'';
      if(!href || href.startsWith('http') || href.startsWith('mailto:') || href.startsWith('tel:')) return;
      const u=new URL(href, location.origin);
      if(!u.searchParams.has('lang')) u.searchParams.set('lang', L);
      a.href=u.pathname+'?'+u.searchParams.toString();
    });
  }

  /* 실행 순서 */
  renderGrid();
  wireLangLinks();
  loadExternal();
})();
</script>
  
  <script>
/* ===== 1) 언어 파라미터로 데이터 전환 (404 방지) ===== */
(function(){
  const params = new URLSearchParams(location.search);
  const lang = (params.get('lang') || 'es').toLowerCase(); // 기본 스페인어
  document.documentElement.setAttribute('data-lang', lang);

  // (예시) 언어별 제목/라벨 바꾸기
  const titleMap = {
    ko: '말씀따라 흐르는 샘물',
    en: 'Streams of the Word',
    es: 'Riachuelos de la Palabra',
    zh: '话语之溪'
  };
  const titleEl = document.querySelector('.cal-head .title');
  if (titleEl && titleMap[lang]) titleEl.textContent = titleMap[lang];

  // (선택) 언어별 데이터 로딩 훅
  // window.loadCalendar(lang);  // 이미 있는 함수가 있으면 파라미터로 언어 전달
})();

/* ===== 2) 달력 제목/연도 화살표 가운데 정렬 보정 ===== */
(function(){
  const head = document.querySelector('.cal-head');
  if(!head){
    // 없으면 만들어 주기(안전)
    const wrap = document.querySelector('.calendar-wrap') || document.body;
    const h = document.createElement('div');
    h.className = 'cal-head';
    h.innerHTML = `
      <button class="btn prev-year" aria-label="Prev Year">◀</button>
      <span class="title">Riachuelos de la Palabra</span>
      <span class="year-nav">
        <span class="year-label" id="yearLabel">2025</span>
      </span>
      <button class="btn next-year" aria-label="Next Year">▶</button>
    `;
    wrap.prepend(h);
  }
})();

/* ===== 3) 셀 안 "달력 제목 링크"가 안 먹는 경우 보정 ===== */
(function(){
  // a 태그가 있어도 상위가 클릭을 막는 경우를 해제
  document.querySelectorAll('.cal-cell a').forEach(a=>{
    a.addEventListener('click', (e)=>{
      e.stopPropagation(); // 상위 그리드 클릭 핸들러 차단
    }, true);
  });
})();
</script>
    
<script>
/* ==== 중복 제목 제거 & 가운데 묶음 보정 ==== */
(function(){
  // 예전 헤더가 두 번 생겼으면 하나만 남기기
  const heads = document.querySelectorAll('.cal-head');
  if (heads.length > 1) { for (let i=1;i<heads.length;i++) heads[i].remove(); }

  // 레거시 h1 숨김(중복 방지)
  const legacy = document.querySelector('h1#page-title, h1.page-title, .cal-title-legacy');
  if (legacy) legacy.style.display = 'none';

  // 가운데 묶음(title + year)을 감싸는 요소가 없으면 생성
  const head = document.querySelector('.cal-head');
  if (head && !head.querySelector('.title-wrap')) {
    const title = head.querySelector('.title') || (()=>{const s=document.createElement('span');s.className='title';s.textContent='Streams';return s;})();
    let yearNav = head.querySelector('.year-nav');
    if (!yearNav) {
      yearNav = document.createElement('span');
      yearNav.className = 'year-nav';
      const yl = document.createElement('span'); yl.id='yearLabel'; yl.className='year-label'; yl.textContent = (new Date()).getFullYear();
      yearNav.appendChild(yl);
    }
    const wrap = document.createElement('div'); wrap.className = 'title-wrap';
    wrap.appendChild(title);
    wrap.appendChild(yearNav);
    // 가운데(두 번째 칸)에 넣기
    const afterPrev = head.querySelector('.prev-year');
    if (afterPrev) head.insertBefore(wrap, afterPrev.nextSibling);
    else head.prepend(wrap);
  }
})();
</script>
</body>
</html>
